# üìú Diia Hakaton - AI Contract Bot

–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —é—Ä–∏–¥–∏—á–Ω–∏—Ö –¥–æ–≥–æ–≤–æ—Ä—ñ–≤. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–æ–≥–æ–≤–æ—Ä–∏ —á–µ—Ä–µ–∑ –∑—Ä—É—á–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–±–æ —É —Ä–µ–∂–∏–º—ñ –¥—ñ–∞–ª–æ–≥—É –∑ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∑–∞–ø–æ–≤–Ω–∏—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **ü§ñ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç**: –î–æ–ø–æ–º–æ–≥–∞ —É –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—ñ –¥–æ–≥–æ–≤–æ—Ä—ñ–≤ —á–µ—Ä–µ–∑ —á–∞—Ç-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (NLP).
- **üìÑ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è .docx —Ñ–∞–π–ª—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–∞–±–ª–æ–Ω—ñ–≤.
- **üë• –ë–∞–≥–∞—Ç–æ–∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π —Ä–µ–∂–∏–º**: –°–ø—ñ–ª—å–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ (–û—Ä–µ–Ω–¥–∞—Ä/–û—Ä–µ–Ω–¥–æ–¥–∞–≤–µ—Ü—å —Ç–æ—â–æ).
- **üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–æ–≥–æ–≤–æ—Ä—É –¥–ª—è –≤—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ —á–µ—Ä–µ–∑ SSE (Server-Sent Events).
- **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ó—Ä—É—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö —Ç–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö.
- **üëÅÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥**: –ü–µ—Ä–µ–≥–ª—è–¥ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä—É –ø–µ—Ä–µ–¥ —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—î—é.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.10+**
- **FastAPI**: REST API + SSE –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É –ø–æ–¥—ñ–π.
- **Pydantic**: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö.
- **python-docx / mammoth**: –†–æ–±–æ—Ç–∞ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ Word.
- **LiteLLM**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI –º–æ–¥–µ–ª—è–º–∏ (OpenAI, Anthropic —Ç–æ—â–æ).
- **Redis** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ): –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Å—ñ–π.

### Frontend
- **React**: SPA –¥–æ–¥–∞—Ç–æ–∫.
- **Vite**: –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É.
- **Axios**: –í–∑–∞—î–º–æ–¥—ñ—è –∑ API.

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏
- Python 3.10+
- Node.js 18+
- Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ—Ç–æ—á–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example` (—è–∫—â–æ —î) –∞–±–æ –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏:

```env
# API Settings
APP_HOST=0.0.0.0
APP_PORT=8000
APP_RELOAD=true

# LLM Settings (–¥–ª—è AI —Ñ—É–Ω–∫—Ü—ñ–π)
LLM_MODEL=gpt-4o-mini
OPENAI_API_KEY=your_api_key_here
# –∞–±–æ
LLM_API_KEY=your_api_key_here

# Session Storage
SESSION_BACKEND=fs  # –∞–±–æ redis
# REDIS_URL=redis://localhost:6379/0
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Session (–∫–æ—Ä–æ—Ç–∫–æ)
- `creator_user_id`: —Ö—Ç–æ —Å—Ç–≤–æ—Ä–∏–≤ —Å–µ—Å—ñ—é (–Ω–µ —Ä–æ–±–∏—Ç—å –π–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —É—á–∞—Å–Ω–∏–∫–æ–º).
- `role_owners`: –º–∞–ø–∞ —Ä–æ–ª—å ‚Üí user_id (—î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤).
- `party_types`, `party_fields`, `contract_fields`: —Å—Ç–∞—Ç—É—Å–∏ –ø–æ–ª—ñ–≤ (–±–µ–∑ –∑–Ω–∞—á–µ–Ω—å).
- `all_data`: –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ (`role.field` –∞–±–æ `field` –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–∏—Ö).
- `history`: –≥–ª–æ–±–∞–ª—å–Ω–∏–π –º–∞—Å–∏–≤ –ø–æ–¥—ñ–π:
  - `field_update`: `{ts, type, key, user_id, role, value, normalized, valid, source}`
  - `sign`: `{ts, type, user_id, roles, state}`
- `signatures`, `state`, `filling_mode`, `progress`, `updated_at`.

### 2. –ó–∞–ø—É—Å–∫ Backend

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python launcher.py
# –ê–±–æ —á–µ—Ä–µ–∑ uvicorn –Ω–∞–ø—Ä—è–º—É:
# uvicorn backend.api.http.server:app --reload
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:8000`
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API: `http://localhost:8000/docs`

### 3. –ó–∞–ø—É—Å–∫ Frontend

```bash
cd frontend

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run dev
```

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:5173`

### üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up --build
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ assets/                 # –®–∞–±–ª–æ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ
‚îÇ   ‚îú‚îÄ‚îÄ documents_files/    # DOCX —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ meta_data/          # JSON –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ —Ä–æ–ª–µ–π
‚îú‚îÄ‚îÄ backend/                # Backend Source Code
‚îÇ   ‚îú‚îÄ‚îÄ api/http            # FastAPI –¥–æ–¥–∞—Ç–æ–∫ —Ç–∞ —Ä–æ—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/tool_adapter    # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è LLM tools
‚îÇ   ‚îú‚îÄ‚îÄ agent/              # –õ–æ–≥—ñ–∫–∞ AI –∞–≥–µ–Ω—Ç–∞ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ domain/             # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (sessions, documents, templates, categories, validation)
‚îÇ   ‚îú‚îÄ‚îÄ infra/              # –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è/–∫–æ–Ω—Ñ—ñ–≥ (fs, redis, settings, persistence)
‚îÇ   ‚îî‚îÄ‚îÄ shared/             # –°–ø—ñ–ª—å–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏/enum/–ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ frontend/               # React Frontend –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ scripts/                # –ú—ñ–≥—Ä–∞—Ü—ñ—ó/–¥–µ–º–æ
‚îú‚îÄ‚îÄ tools/                  # CLI —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (manage_content.py, verify_*.py)
‚îú‚îÄ‚îÄ tests/                  # Pytest
‚îî‚îÄ‚îÄ launcher.py             # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
```

## üîß CLI –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

–ü—Ä–æ—î–∫—Ç –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—ñ CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:

**–ß–∞—Ç —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI):**
```bash
python launcher.py --test
```

**–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (–¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π/—à–∞–±–ª–æ–Ω—ñ–≤):**
```bash
# –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
python tools/manage_content.py add-category --id auto_lease --label "–û—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ"

# –î–æ–¥–∞—Ç–∏ —à–∞–±–ª–æ–Ω
python tools/manage_content.py add-template --category auto_lease --id std_auto --name "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –¥–æ–≥–æ–≤—ñ—Ä"
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- **PII Sanitization**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (–ø–∞—Å–ø–æ—Ä—Ç, –Ü–ü–ù —Ç–æ—â–æ) –º–∞—Å–∫—É—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –≤ LLM.
- **Session Access**: –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Å—ñ–π –∑–∞—Ö–∏—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ `X-User-ID`.

---
–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è Diia Hakaton üá∫üá¶
