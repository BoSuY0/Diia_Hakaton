# üìú Diia Hakaton - AI Contract Bot

–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —é—Ä–∏–¥–∏—á–Ω–∏—Ö –¥–æ–≥–æ–≤–æ—Ä—ñ–≤. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–æ–≥–æ–≤–æ—Ä–∏ —á–µ—Ä–µ–∑ –∑—Ä—É—á–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–±–æ —É —Ä–µ–∂–∏–º—ñ –¥—ñ–∞–ª–æ–≥—É –∑ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∑–∞–ø–æ–≤–Ω–∏—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **ü§ñ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç**: –î–æ–ø–æ–º–æ–≥–∞ —É –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—ñ –¥–æ–≥–æ–≤–æ—Ä—ñ–≤ —á–µ—Ä–µ–∑ —á–∞—Ç-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (NLP).
- **üìÑ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è .docx —Ñ–∞–π–ª—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–∞–±–ª–æ–Ω—ñ–≤.
- **üë• –ë–∞–≥–∞—Ç–æ–∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π —Ä–µ–∂–∏–º**: –°–ø—ñ–ª—å–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ (–û—Ä–µ–Ω–¥–∞—Ä/–û—Ä–µ–Ω–¥–æ–¥–∞–≤–µ—Ü—å —Ç–æ—â–æ).
- **üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–æ–≥–æ–≤–æ—Ä—É –¥–ª—è –≤—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ —á–µ—Ä–µ–∑ SSE (Server-Sent Events).
- **üîó –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞**: –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—É –≤–∏–¥—É `/?session_id=...&role=lessee` –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —ñ–Ω—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ä–æ–ª—ñ.
- **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ó—Ä—É—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö —Ç–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö.
- **üëÅÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥**: –ü–µ—Ä–µ–≥–ª—è–¥ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä—É –ø–µ—Ä–µ–¥ —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—î—é.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.10+**
- **FastAPI**: REST API + SSE –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É –ø–æ–¥—ñ–π.
- **Pydantic**: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö.
- **python-docx / mammoth**: –†–æ–±–æ—Ç–∞ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ Word.
- **LiteLLM**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI –º–æ–¥–µ–ª—è–º–∏ (OpenAI, Anthropic —Ç–æ—â–æ).
- **Redis** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ): –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Å—ñ–π.

### Frontend
- **React**: SPA –¥–æ–¥–∞—Ç–æ–∫.
- **Vite**: –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É.
- **Axios**: –í–∑–∞—î–º–æ–¥—ñ—è –∑ API.

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏
- Python 3.10+
- Node.js 18+
- Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ—Ç–æ—á–µ–Ω–Ω—è

–°–∫–æ–ø—ñ—é–π—Ç–µ `.env.example` ‚Üí `.env` —ñ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–¥ –≤–∞—à–µ –æ—Ç–æ—á–µ–Ω–Ω—è. –û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

- `ENV=dev|prod` ‚Äî –ø—Ä–æ—Ñ—ñ–ª—å. Dev –ø—Ä–∞—Ü—é—î –∑—ñ SQLite/–ø–∞–º‚Äô—è—Ç—Ç—é, prod –æ—á—ñ–∫—É—î Redis + MySQL.
- `SESSION_BACKEND=redis|memory|fs`, `REDIS_URL=redis://...`
- `DRAFT_TTL_HOURS`, `FILLED_TTL_HOURS`, `SIGNED_TTL_DAYS` ‚Äî TTL –¥–ª—è —á–µ—Ä–Ω–µ—Ç–æ–∫/–∑–∞–ø–æ–≤–Ω–µ–Ω–∏—Ö/–ø—ñ–¥–ø–∏—Å–∞–Ω–∏—Ö —Å–µ—Å—ñ–π.
- `CONTRACTS_DB_URL` ‚Äî DSN MySQL —á–µ—Ä–µ–∑ `pymysql`; —è–∫—â–æ –ø–æ—Ä–æ–∂–Ω—å–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è SQLite.
- `CONTRACTS_FS_FALLBACK` ‚Äî —Ç–∏–º—á–∞—Å–æ–≤–∏–π —á–∏—Ç–∞–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö JSON, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `false`.
- `AUTH_MODE=auto|jwt|header` + `AUTH_JWT_SECRET` ‚Äî –≤–≤—ñ–º–∫–Ω—É—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É Bearer JWT; —É dev –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ `X-User-ID`.
- `LLM_MODEL` / `LLM_API_KEY` ‚Äî —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ AI-—á–∞—Ç.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑–∞ –ø—Ä–æ—Ñ—ñ–ª—è–º–∏**
- Dev: –∑–∞–ª–∏—à—Ç–µ `CONTRACTS_DB_URL` –ø–æ—Ä–æ–∂–Ω—ñ–º (SQLite), `SESSION_BACKEND=redis` –±–µ–∑ `REDIS_URL` –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –≤ in-memory —Ä–µ–∂–∏–º—ñ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É.
- Prod: –º–æ–∂–Ω–∞ –≤–∑—è—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ `.env.prod.example` ‚Äî `ENV=prod`, `AUTH_MODE=jwt`, `AUTH_JWT_SECRET`, `REDIS_URL`, `CONTRACTS_DB_URL=mysql+pymysql://...`, `CONTRACTS_FS_FALLBACK=false`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Session (–∫–æ—Ä–æ—Ç–∫–æ)
- `creator_user_id`: —Ö—Ç–æ —Å—Ç–≤–æ—Ä–∏–≤ —Å–µ—Å—ñ—é (–Ω–µ —Ä–æ–±–∏—Ç—å –π–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —É—á–∞—Å–Ω–∏–∫–æ–º).
- `role_owners`: –º–∞–ø–∞ —Ä–æ–ª—å ‚Üí user_id (—î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤).
- `party_types`, `party_fields`, `contract_fields`: —Å—Ç–∞—Ç—É—Å–∏ –ø–æ–ª—ñ–≤ (–±–µ–∑ –∑–Ω–∞—á–µ–Ω—å).
- `all_data`: –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ (`role.field` –∞–±–æ `field` –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–∏—Ö).
- `history`: –≥–ª–æ–±–∞–ª—å–Ω–∏–π –º–∞—Å–∏–≤ –ø–æ–¥—ñ–π:
  - `field_update`: `{ts, type, key, user_id, role, value, normalized, valid, source}`
  - `sign`: `{ts, type, user_id, roles, state}`
- `signatures`, `state`, `filling_mode`, `progress`, `updated_at`.
- TTL –∑–∞ —Å—Ç–µ–π—Ç–æ–º: —á–µ—Ä–Ω–µ—Ç–∫–∏ ‚Äî `draft_ttl_hours`, –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ ‚Äî `filled_ttl_hours`, –ø—ñ–¥–ø–∏—Å–∞–Ω—ñ ‚Äî `signed_ttl_days`.
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏: –æ—Å–Ω–æ–≤–Ω–µ —Å—Ö–æ–≤–∏—â–µ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (`CONTRACTS_DB_URL` –¥–ª—è MySQL, —ñ–Ω–∞–∫—à–µ SQLite). –§–∞–π–ª–æ–≤–∏–π JSON –∑–∞–ª–∏—à–µ–Ω–æ –ª–∏—à–µ —è–∫ –æ–ø—Ü—ñ–π–Ω–∏–π fallback —á–µ—Ä–µ–∑ `CONTRACTS_FS_FALLBACK`.

## üîë ACL —Ç–∞ —Ä–æ–ª—ñ

- –†–æ–ª—å –∑–∞–∫—Ä—ñ–ø–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ `POST /sessions/{id}/party-context` –∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–º `user_id` (Bearer JWT –∞–±–æ `X-User-ID` —É dev).
- 1 `user_id` ‚Üí –º–∞–∫—Å–∏–º—É–º 1 —Ä–æ–ª—å —É —Å–µ—Å—ñ—ó. –ü–æ–≤—Ç–æ—Ä–Ω–∏–π claim —ñ–Ω—à–æ—ó —Ä–æ–ª—ñ –±–ª–æ–∫—É—î—Ç—å—Å—è.
- –£ —Ä–µ–∂–∏–º—ñ `full` —ñ–Ω—ñ—Ü—ñ–∞—Ç–æ—Ä –º–æ–∂–µ –ø—Ä–µ—Ñ—ñ–ª–∏—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–∏, –¥–æ–∫–∏ —Ä–æ–ª—ñ –≤—ñ–ª—å–Ω—ñ; –ø—ñ—Å–ª—è claim —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –º–æ–∂–µ –ª–∏—à–µ –≤–ª–∞—Å–Ω–∏–∫ —Ä–æ–ª—ñ.
- –£–º–æ–≤–∏ –¥–æ–≥–æ–≤–æ—Ä—É —Ä–µ–¥–∞–≥—É—é—Ç—å —É—á–∞—Å–Ω–∏–∫–∏ –∑ —Ä–æ–ª–ª—é; —è–∫—â–æ —Ä–æ–ª—ñ —â–µ –Ω–µ –∑–∞–π–Ω—è—Ç—ñ ‚Äî –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ `creator_user_id`.
- `history` –æ–¥–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞ (–ø–æ–¥—ñ—ó `field_update`/`sign`) –∑—ñ —à—Ç–∞–º–ø–∞–º–∏ `user_id`/`role`.

## üîå –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –î—ñ—î—é / JWT

- `AUTH_MODE=jwt` ‚Äî prod-—Ä–µ–∂–∏–º: `user_id` –±–µ—Ä–µ—Ç—å—Å—è –ª–∏—à–µ –∑ Bearer —Ç–æ–∫–µ–Ω–∞, `X-User-ID` —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è.
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞: –∞–ª–≥–æ—Ä–∏—Ç–º `AUTH_JWT_ALGO`, –æ–ø—Ü—ñ–π–Ω–æ `AUTH_JWT_ISSUER`/`AUTH_JWT_AUDIENCE`.
- –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π `user_id` –±—É–¥—É—î—Ç—å—Å—è —è–∫ `AUTH_USER_PREFIX + <sub>` (–ø—Ä–µ—Ñ—ñ–∫—Å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `diia:`). –£—Å—ñ ACL/—ñ—Å—Ç–æ—Ä—ñ—è/–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ —Ü—å–æ–≥–æ ID.
- –ï–Ω–¥–ø–æ—ñ–Ω—Ç `/me/profile` –ø–æ–≤–µ—Ä—Ç–∞—î `user_id` + —Ä–æ–∑—ñ–±—Ä–∞–Ω—ñ –∫–ª–µ–π–º–∏ –ø—Ä–æ—Ñ—ñ–ª—é (—è–∫—â–æ —Ç–æ–∫–µ–Ω –Ω–∞–¥–∞–Ω–æ).
- –î–∏–≤. `docs/diia_integration.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π (–∫–ª–µ–π–º–∏, –º–∞–ø—ñ–Ω–≥, —è–∫ –ø—ñ–¥—à–∏–≤–∞—Ç–∏ —Ç–æ–∫–µ–Ω —É —Ñ—Ä–æ–Ω—Ç/SSE).

### 2. –ó–∞–ø—É—Å–∫ Backend

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python launcher.py
# –ê–±–æ —á–µ—Ä–µ–∑ uvicorn –Ω–∞–ø—Ä—è–º—É:
# uvicorn backend.api.http.server:app --reload
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:8000`
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API: `http://localhost:8000/docs`

### MySQL –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤

- Docker Compose –º—ñ—Å—Ç–∏—Ç—å —Å–µ—Ä–≤—ñ—Å `contracts-db` (MySQL 8). –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ `docker-compose up` ‚Äî –ë–î –ø—ñ–¥–Ω—ñ–º–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
- URL –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –æ–¥—Ä–∞–∑—É –ø—Ä–æ–ø–∏—Å–∞—Ç–∏ –≤ `.env`:  
  `CONTRACTS_DB_URL=mysql+pymysql://contracts:contracts@contracts-db:3306/contracts_db`
- –Ø–∫—â–æ —Ä–∞–Ω—ñ—à–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–ª–∏—Å—å —É JSON (`assets/meta_data/meta_data_users/documents/*.json`), –≤–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—é –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
  ```bash
  python tools/migrate_contracts_to_db.py
  # –∞–±–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫ –±–µ–∑ –∑–∞–ø–∏—Å—É:
  python tools/migrate_contracts_to_db.py --dry-run
  ```
- –§–∞–π–ª–æ–≤–∏–π fallback –≤–∏–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Ä–µ–∂–∏–º —á–∏—Ç–∞–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ä–∏—Ö JSON, –≤–∏—Å—Ç–∞–≤—ñ—Ç—å `CONTRACTS_FS_FALLBACK=true` —ñ –ø–ª–∞–Ω–æ–≤–æ –≤–∏–º–∫–Ω—ñ—Ç—å –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó.

### 3. –ó–∞–ø—É—Å–∫ Frontend

```bash
cd frontend

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run dev
```

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:5173`

### üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up --build
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ assets/                 # –®–∞–±–ª–æ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ
‚îÇ   ‚îú‚îÄ‚îÄ documents_files/    # DOCX —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ meta_data/          # JSON –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ —Ä–æ–ª–µ–π
‚îú‚îÄ‚îÄ backend/                # Backend Source Code
‚îÇ   ‚îú‚îÄ‚îÄ api/http            # FastAPI –¥–æ–¥–∞—Ç–æ–∫ —Ç–∞ —Ä–æ—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/tool_adapter    # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è LLM tools
‚îÇ   ‚îú‚îÄ‚îÄ agent/              # –õ–æ–≥—ñ–∫–∞ AI –∞–≥–µ–Ω—Ç–∞ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ domain/             # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (sessions, documents, templates, categories, validation)
‚îÇ   ‚îú‚îÄ‚îÄ infra/              # –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è/–∫–æ–Ω—Ñ—ñ–≥ (fs, redis, settings, persistence)
‚îÇ   ‚îî‚îÄ‚îÄ shared/             # –°–ø—ñ–ª—å–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏/enum/–ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ frontend/               # React Frontend –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ scripts/                # –ú—ñ–≥—Ä–∞—Ü—ñ—ó/–¥–µ–º–æ
‚îú‚îÄ‚îÄ tools/                  # CLI —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (manage_content.py, verify_*.py)
‚îú‚îÄ‚îÄ tests/                  # Pytest
‚îî‚îÄ‚îÄ launcher.py             # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
```

## üîß CLI –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

–ü—Ä–æ—î–∫—Ç –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—ñ CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:

**–ß–∞—Ç —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI):**
```bash
python launcher.py --test
```

**–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (–¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π/—à–∞–±–ª–æ–Ω—ñ–≤):**
```bash
# –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
python tools/manage_content.py add-category --id auto_lease --label "–û—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ"

# –î–æ–¥–∞—Ç–∏ —à–∞–±–ª–æ–Ω
python tools/manage_content.py add-template --category auto_lease --id std_auto --name "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –¥–æ–≥–æ–≤—ñ—Ä"
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- **PII Sanitization**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (–ø–∞—Å–ø–æ—Ä—Ç, –Ü–ü–ù —Ç–æ—â–æ) –º–∞—Å–∫—É—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –≤ LLM.
- **Session Access**: –£ –ø—Ä–æ–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Bearer JWT (`AUTH_MODE=jwt` + `AUTH_JWT_SECRET`), —É dev –¥–æ–∑–≤–æ–ª–µ–Ω–∏–π `X-User-ID` —è–∫ fallback.
- **–ê—É–¥–∏—Ç**: —É—Å—ñ 401/403 –ª–æ–≥—É—é—Ç—å—Å—è, —ñ—Å—Ç–æ—Ä—ñ—è —Å–µ—Å—ñ—ó –º—ñ—Å—Ç–∏—Ç—å `user_id`/`role` –¥–ª—è –ø—ñ–¥–ø–∏—Å—ñ–≤ —ñ –∑–º—ñ–Ω –ø–æ–ª—ñ–≤.

---
–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è Diia Hakaton üá∫üá¶
